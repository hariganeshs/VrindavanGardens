<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Vrindavan Gardens & Agro Nursery - Premium plant nursery in Kottayam. Discover exotic plants, elegant pots, and gardening essentials.">
    <title>Vrindavan Gardens | Premium Agro Nursery</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap"
        rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <!-- Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        forest: {
                            50: '#f2fbf5', 100: '#e1f7e6', 200: '#c3ecd0', 300: '#94dbb3',
                            400: '#5cc290', 500: '#35a574', 600: '#25845c', 700: '#1f6a4c',
                            800: '#1b543e', 900: '#0f291e', 950: '#0d2d23'
                        },
                        gold: {
                            400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309'
                        },
                        cream: '#fcfbf7', // Warm background
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'fade-in': 'fadeIn 1s ease-out forwards',
                        'slide-up': 'slideUp 0.8s ease-out forwards',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-15px)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Utilities */
        .glass-nav {
            background: rgba(15, 41, 30, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .text-stroke {
            -webkit-text-stroke: 1px rgba(255, 255, 255, 0.1);
        }

        .hero-text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Hide Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #0f291e;
        }

        ::-webkit-scrollbar-thumb {
            background: #35a574;
            border-radius: 3px;
        }

        /* Loader */
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #35a574;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="bg-cream text-gray-800 antialiased selection:bg-forest-500 selection:text-white">

    <!-- Definitions -->
    <svg class="hidden">
        <symbol id="icon-leaf" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
        </symbol>
        <symbol id="icon-whatsapp" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
        </symbol>
    </svg>

    <!-- Navbar -->
    <nav class="glass-nav fixed w-full z-50 transition-all duration-300">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center gap-3 group">
                <div
                    class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center group-hover:bg-forest-500 transition-colors">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </div>
                <div>
                    <h1 class="font-serif text-xl text-white tracking-wide">Vrindavan Gardens</h1>
                    <p class="text-xs text-forest-200 uppercase tracking-widest">& Agro Nursery</p>
                </div>
            </a>

            <div class="flex items-center gap-6">
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center gap-8 text-sm font-medium text-forest-100">
                    <a href="#about" class="hover:text-gold-400 transition-colors">About</a>
                    <a href="#collection" class="hover:text-gold-400 transition-colors">Collection</a>
                    <a href="#visit" class="hover:text-gold-400 transition-colors">Visit Us</a>
                </div>

                <!-- CTA -->
                <a href="https://wa.me/919447143347" target="_blank"
                    class="hidden sm:flex items-center gap-2 bg-gradient-to-r from-forest-500 to-forest-600 hover:from-forest-400 hover:to-forest-500 text-white px-5 py-2.5 rounded-full text-sm font-semibold shadow-lg hover:shadow-green-900/20 transition-all transform hover:-translate-y-0.5">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                        <use href="#icon-whatsapp" />
                    </svg>
                    <span>Connect</span>
                </a>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden text-white p-2 focus:outline-none z-50 relative">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path id="menu-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                        <path id="close-icon" class="hidden" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu"
            class="fixed inset-0 bg-forest-950/95 backdrop-blur-xl z-40 transform translate-x-full transition-transform duration-300 flex flex-col items-center justify-center">
            <nav class="flex flex-col items-center gap-8 text-2xl font-serif text-white">
                <a href="#about" class="mobile-link hover:text-gold-400 transition-colors">About</a>
                <a href="#collection" class="mobile-link hover:text-gold-400 transition-colors">Collection</a>
                <a href="#visit" class="mobile-link hover:text-gold-400 transition-colors">Visit Us</a>
                <a href="https://wa.me/919447143347" target="_blank"
                    class="mobile-link text-gold-400 flex items-center gap-2 mt-4">
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                        <use href="#icon-whatsapp" />
                    </svg>
                    Connect via WhatsApp
                </a>
            </nav>
        </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative h-screen min-h-[600px] flex items-center justify-center overflow-hidden">
        <!-- Background Image -->
        <div class="absolute inset-0 z-0">
            <img src="assets/hero_bg.png" alt="Lush Garden" class="w-full h-full object-cover animate-fade-in">
            <div
                class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-forest-900/90 mix-blend-multiply">
            </div>
        </div>

        <!-- Content -->
        <div class="relative z-10 container mx-auto px-6 text-center text-white mt-20 md:mt-16">
            <span
                class="inline-block py-1 px-4 border border-white/30 rounded-full text-sm font-medium bg-white/5 backdrop-blur-sm mb-6 animate-slide-up"
                style="animation-delay: 0.1s;">Est. Kottayam, Kerala</span>
            <h1 class="font-serif text-5xl md:text-7xl lg:text-8xl mb-6 leading-tight animate-slide-up hero-text-shadow"
                style="animation-delay: 0.2s;">
                Bring Nature <br><span class="text-gold-400 italic">Home</span>
            </h1>
            <p class="text-lg md:text-2xl text-forest-100 max-w-2xl mx-auto mb-10 font-light animate-slide-up"
                style="animation-delay: 0.3s;">
                Curated collection of exotic plants, artisanal pots, and gardening essentials for the modern home.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center animate-slide-up" style="animation-delay: 0.4s;">
                <a href="#collection"
                    class="px-8 py-4 bg-white text-forest-900 rounded-full font-semibold hover:bg-forest-50 transition-colors shadow-xl">
                    Explore Collection
                </a>
                <a href="#visit"
                    class="px-8 py-4 border border-white/40 bg-white/10 backdrop-blur-sm text-white rounded-full font-semibold hover:bg-white/20 transition-colors">
                    Locate Us
                </a>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce text-white/50">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
            </svg>
        </div>
    </header>

    <!-- About Section -->
    <section id="about" class="py-24 bg-cream overflow-hidden">
        <div class="container mx-auto px-6">
            <div class="flex flex-col lg:flex-row items-center gap-16">
                <div class="w-full lg:w-1/2 relative">
                    <div class="aspect-square md:aspect-[4/5] rounded-2xl overflow-hidden shadow-2xl relative z-10">
                        <img src="assets/about_nursery.png"
                            alt="Inside Vrindavan Gardens - Lush tropical plants in our nursery"
                            class="w-full h-full object-cover transition-transform duration-700 hover:scale-105">
                    </div>
                    <!-- Decorative Element -->
                    <div class="absolute -bottom-10 -right-10 w-64 h-64 bg-gold-400/20 rounded-full blur-3xl -z-0">
                    </div>
                </div>

                <div class="w-full lg:w-1/2">
                    <span class="text-gold-600 font-bold uppercase tracking-wider text-sm mb-2 block">Our Story</span>
                    <h2 class="font-serif text-4xl md:text-5xl text-forest-900 mb-6 leading-tight">Cultivating Joy in
                        Every Leaf</h2>
                    <p class="text-gray-600 text-lg leading-relaxed mb-6">
                        Nestled in the lush landscapes of Pampady, Kottayam, Vrindavan Gardens is more than just a
                        nursery. It's a sanctuary for plant lovers. We meticulously select every sapling, ensuring they
                        bring vibrant life and serenity to your spaces.
                    </p>
                    <p class="text-gray-600 text-lg leading-relaxed mb-8">
                        From rare indoor varieties to hardy outdoor ornamentals and fruit-bearing trees, our expertise
                        is rooted in years of passion for agriculture.
                    </p>

                    <div class="grid grid-cols-2 gap-8">
                        <div>
                            <h4 class="font-serif text-2xl text-forest-800 mb-1">500+</h4>
                            <p class="text-sm text-gray-500 uppercase tracking-wide">Plant Varieties</p>
                        </div>
                        <div>
                            <h4 class="font-serif text-2xl text-forest-800 mb-1">100%</h4>
                            <p class="text-sm text-gray-500 uppercase tracking-wide">Organic Care</p>
                        </div>
                    </div>

                    <!-- Custom Pots Highlight -->
                    <div
                        class="mt-8 p-5 bg-gradient-to-r from-gold-400/10 to-forest-100 rounded-2xl border border-gold-400/30 relative overflow-hidden group hover:shadow-lg transition-all duration-300">
                        <div
                            class="absolute top-0 right-0 w-24 h-24 bg-gold-400/10 rounded-full -translate-y-1/2 translate-x-1/2 group-hover:scale-150 transition-transform duration-500">
                        </div>
                        <div class="flex items-start gap-4 relative z-10">
                            <div
                                class="w-12 h-12 bg-gold-400/20 rounded-xl flex items-center justify-center flex-shrink-0">
                                <svg class="w-7 h-7 text-gold-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M4 21h16l-2-14H6L4 21z" />
                                    <rect x="7" y="5" width="10" height="3" rx="1" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-serif text-lg text-forest-900 mb-1">Custom-Made Pots</h4>
                                <p class="text-gray-600 text-sm leading-relaxed">We craft bespoke pots in <span
                                        class="font-semibold text-forest-700">all sizes and shapes</span> to perfectly
                                    complement your plants and spaces. Tell us your vision!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Collection Section -->
    <section id="collection" class="py-24 bg-forest-50 relative">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="font-serif text-4xl md:text-5xl text-forest-900 mb-4">Curated Collection</h2>
                <div class="h-1 w-20 bg-gold-400 mx-auto rounded-full"></div>
            </div>

            <!-- Filters -->
            <div class="flex flex-wrap justify-center gap-3 mb-12" id="filter-container">
                <!-- Injected via JS -->
            </div>

            <!-- Loading State -->
            <div id="loading" class="flex flex-col items-center justify-center py-20">
                <div class="loader mb-4"></div>
                <p class="text-forest-600 font-medium">Fetching fresh greens...</p>
            </div>

            <!-- Error State -->
            <div id="error" class="hidden text-center py-20 max-w-lg mx-auto">
                <!-- Error Icon -->
                <div class="w-16 h-16 mx-auto mb-6 rounded-full bg-red-100 flex items-center justify-center">
                    <svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                </div>

                <!-- Error Title -->
                <h3 id="error-title" class="text-xl font-semibold text-gray-800 mb-2">Unable to Load Products</h3>

                <!-- Error Message -->
                <p id="error-message" class="text-gray-600 mb-4">We couldn't fetch the product catalog.</p>

                <!-- Error Details Box -->
                <div id="error-details" class="bg-red-50 border border-red-200 rounded-xl p-4 mb-6 text-left">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 mt-0.5">
                            <span id="error-icon"
                                class="inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-100 text-red-600 text-xs font-bold">!</span>
                        </div>
                        <div>
                            <p id="error-reason" class="text-sm font-medium text-red-800">Error loading data</p>
                            <p id="error-hint" class="text-sm text-red-600 mt-1">Please check your internet connection
                                and try again.</p>
                        </div>
                    </div>
                </div>

                <!-- Technical Details (collapsible) -->
                <details class="text-left bg-gray-50 rounded-lg p-4 mb-6">
                    <summary class="text-sm font-medium text-gray-700 cursor-pointer hover:text-gray-900">
                        Technical Details
                    </summary>
                    <div class="mt-3 text-xs text-gray-500 font-mono bg-gray-100 rounded p-3 overflow-x-auto">
                        <p id="error-code" class="mb-1">Error Code: Unknown</p>
                        <p id="error-type" class="mb-1">Type: Connection Error</p>
                        <p id="error-timestamp" class="mb-1">Time: --</p>
                    </div>
                </details>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-3 justify-center">
                    <button onclick="fetchData()"
                        class="px-6 py-2.5 bg-forest-600 hover:bg-forest-700 text-white rounded-full font-medium transition-colors flex items-center justify-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                        Retry Loading
                    </button>
                    <a href="https://wa.me/919447143347?text=Hi!%20I%20am%20having%20trouble%20viewing%20the%20product%20catalog%20on%20vrindavangardens.com"
                        target="_blank"
                        class="px-6 py-2.5 bg-white border border-gray-300 hover:border-forest-500 text-gray-700 hover:text-forest-700 rounded-full font-medium transition-all flex items-center justify-center gap-2">
                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                            <use href="#icon-whatsapp" />
                        </svg>
                        Contact Support
                    </a>
                </div>
            </div>

            <!-- Grid -->
            <div id="grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Cards Injected via JS -->
            </div>

            <!-- Empty State -->
            <div id="empty" class="hidden text-center py-20">
                <p class="text-gray-500 text-lg">No plants found in this category ðŸŒ±</p>
            </div>
        </div>
    </section>

    <!-- Location / Visit Us -->
    <section id="visit" class="py-24 bg-white">
        <div class="container mx-auto px-6">
            <div class="bg-forest-900 rounded-[2rem] overflow-hidden shadow-2xl flex flex-col md:flex-row">
                <div class="w-full md:w-1/2 p-12 lg:p-16 flex flex-col justify-center text-white">
                    <h3 class="font-serif text-3xl md:text-4xl mb-6">Visit Our Garden</h3>
                    <p class="text-forest-200 mb-8 leading-relaxed">
                        Experience the tranquility of nature. Walk through our aisles of greenery and let our experts
                        guide you to your perfect plant match.
                    </p>

                    <div class="space-y-6">
                        <div class="flex items-start gap-4">
                            <div
                                class="w-10 h-10 rounded-full bg-forest-800 flex items-center justify-center flex-shrink-0 text-gold-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg">Address</h4>
                                <p class="text-forest-300">Kothala P.O., Pampady, Kottayam, Kerala - 686502</p>
                            </div>
                        </div>

                        <div class="flex items-start gap-4">
                            <div
                                class="w-10 h-10 rounded-full bg-forest-800 flex items-center justify-center flex-shrink-0 text-gold-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg">Hours</h4>
                                <p class="text-forest-300">Mon-Sat: 9:00 AM - 7:00 PM<br>Sun: 10:00 AM - 5:00 PM</p>
                            </div>
                        </div>

                        <div class="flex items-start gap-4">
                            <div
                                class="w-10 h-10 rounded-full bg-forest-800 flex items-center justify-center flex-shrink-0 text-gold-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg">Contact</h4>
                                <p class="text-forest-300">+91 9447143347</p>
                                <a href="https://wa.me/919447143347" target="_blank"
                                    class="inline-flex items-center gap-2 text-gold-400 hover:text-gold-300 transition-colors text-sm mt-1">
                                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                        <use href="#icon-whatsapp" />
                                    </svg>
                                    WhatsApp Us
                                </a>
                            </div>
                        </div>
                    </div>

                    <a href="https://maps.app.goo.gl/f7eSaPPBDeQfbeMX7" target="_blank"
                        class="mt-10 inline-flex items-center gap-2 text-gold-400 font-semibold hover:text-gold-300 transition-colors">
                        Get Directions <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </a>
                </div>
                <div class="w-full md:w-1/2 min-h-[400px]">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d7868.812609959605!2d76.6642412!3d9.5601997!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3b063326c6adf91f%3A0x9e755c1376d038f1!2zVnJpbmRhdmFuIEdhcmRlbnMgJiBBZ3JvIE51cnNlcnkg4LS14LWD4LSo4LWN4LSm4LS-4LS14LW7IOC0l-C0vuC1vOC0oeC1u-C0uOC1jSAmIOC0heC0l-C1jeC0sOC1iyDgtKjgtYfgtLTgtY3gtLjgtLHgtL8!5e0!3m2!1sen!2sin!4v1766903303729!5m2!1sen!2sin"
                        width="100%" height="100%" style="border:0; filter: grayscale(20%) contrast(1.2);"
                        allowfullscreen="" loading="lazy">
                    </iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-forest-950 text-forest-300 py-12 border-t border-white/5">
        <div class="container mx-auto px-6 text-center">
            <div class="flex items-center justify-center gap-3 mb-6 opacity-70">
                <div class="w-8 h-8 bg-forest-800 rounded-full flex items-center justify-center">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </div>
                <h2 class="font-serif text-xl tracking-wide text-white">Vrindavan Gardens</h2>
            </div>
            <p class="text-sm mb-6">&copy; 2024 Vrindavan Gardens & Agro Nursery. All rights reserved.</p>
            <div class="flex justify-center gap-6">
                <!-- Socials could go here -->
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTA7D1wlUdI93kjQNHHVTxmyM2L_MoTvbPmOGhOOlMfQb9F44q24_tw6BZOGgg4OyEfgWFAKKVwczZa/pub?output=csv';
        const WHATSAPP = '919447143347';
        let products = [];
        let activeCat = 'all';

        // Helper to get value from product with flexible key matching
        const getVal = (p, ...keys) => {
            for (let key of keys) {
                if (p[key] !== undefined && p[key] !== null && String(p[key]).trim()) {
                    return String(p[key]).trim();
                }
            }
            // Try case-insensitive match
            for (let k of Object.keys(p)) {
                const trimmedK = k.trim().toLowerCase();
                for (let key of keys) {
                    if (trimmedK === key.toLowerCase() && p[k] !== undefined && p[k] !== null && String(p[k]).trim()) {
                        return String(p[k]).trim();
                    }
                }
            }
            return '';
        };

        // Format price with rupee symbol
        const formatMoney = (p) => {
            if (!p || p === '') return 'Ask for Price';
            const cleaned = String(p).trim();
            if (!cleaned) return 'Ask for Price';
            // Handle price ranges like "250-350"
            if (cleaned.includes('-')) {
                const parts = cleaned.split('-').map(x => x.trim().replace(/[^\d]/g, ''));
                if (parts.length === 2 && parts[0] && parts[1]) {
                    return `â‚¹${parseInt(parts[0]).toLocaleString('en-IN')} - â‚¹${parseInt(parts[1]).toLocaleString('en-IN')}`;
                }
            }
            const n = parseFloat(cleaned.replace(/[^\d.]/g, ''));
            return isNaN(n) ? cleaned : `â‚¹${n.toLocaleString('en-IN')}`;
        };

        // Convert Google Drive share links to viewable image URLs
        const driveImg = (u) => {
            if (!u) return '';
            u = String(u).trim();
            if (!u || u === '[URL]' || u.startsWith('[')) return '';

            // Extract file ID from various Google Drive URL formats
            let fileId = null;

            if (u.includes('/file/d/')) {
                const match = u.match(/\/file\/d\/([\w-]+)/);
                if (match) fileId = match[1];
            } else if (u.includes('id=')) {
                const match = u.match(/id=([\w-]+)/);
                if (match) fileId = match[1];
            } else if (u.includes('drive.google.com') && u.includes('/d/')) {
                const match = u.match(/\/d\/([\w-]+)/);
                if (match) fileId = match[1];
            }

            if (fileId) {
                // Use Google's thumbnail API - more reliable for embedding
                return `https://drive.google.com/thumbnail?id=${fileId}&sz=w400`;
            }

            return u;
        };

        // DOM Elements
        const el = {
            grid: document.getElementById('grid'),
            filters: document.getElementById('filter-container'),
            loading: document.getElementById('loading'),
            error: document.getElementById('error'),
            empty: document.getElementById('empty')
        };

        // Render category filter buttons
        function renderFilters(cats) {
            const icons = {
                'indoor & outdoor': 'ðŸŒ¿',
                'indoor plant': 'ðŸ ',
                'outdoor plant': 'ðŸŒ³',
                'plant': 'ðŸŒ±',
                'pot': 'ðŸº',
                'pond': 'ðŸ’§',
                'default': 'ðŸƒ'
            };

            const getIcon = (cat) => {
                const c = cat.toLowerCase();
                for (let key of Object.keys(icons)) {
                    if (c.includes(key)) return icons[key];
                }
                return icons.default;
            };

            const mkBtn = (c, name) => `
                <button onclick="setCat('${c}')" 
                    class="px-5 py-2 rounded-full text-sm font-medium transition-all ${activeCat === c
                    ? 'bg-forest-600 text-white shadow-lg scale-105'
                    : 'bg-white text-forest-700 hover:bg-forest-100'}">
                    ${getIcon(name)} ${name}
                </button>`;

            el.filters.innerHTML = mkBtn('all', 'All Collection') + cats.map(c => mkBtn(c.toLowerCase(), c)).join('');
        }

        // Create product card HTML
        function createCard(p, i) {
            const imgUrl = getVal(p, 'IMAGE URL', 'Image URL', 'IMAGE', 'image', 'ImageURL');
            const img = driveImg(imgUrl);
            const name = getVal(p, 'NAME', 'Name', 'name', 'Title') || 'Unnamed Item';
            const price = getVal(p, 'PRICE', 'Price', 'price', 'Cost');
            const cat = getVal(p, 'CATEGORY', 'Category', 'category') || 'Plants';

            // Clean up name - remove newlines
            const cleanName = name.replace(/\n/g, ' ').trim();

            return `
                <div class="group bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 opacity-0 animate-slide-up" style="animation-delay: ${i * 0.05}s">
                    <div class="relative h-72 overflow-hidden bg-forest-100">
                        <!-- Blurred background layer -->
                        <div class="absolute inset-0 scale-110" 
                            style="background-image: url('${img || 'https://placehold.co/400x300/e1f7e6/1f6a4c?text=' + encodeURIComponent(cleanName.substring(0, 20))}'); background-size: cover; background-position: center; filter: blur(20px) saturate(1.2); opacity: 0.8;"></div>
                        <!-- Main product image -->
                        <img src="${img || 'https://placehold.co/400x300/e1f7e6/1f6a4c?text=' + encodeURIComponent(cleanName.substring(0, 20))}" alt="${cleanName}" loading="lazy" 
                            class="relative w-full h-full object-contain transition-transform duration-700 group-hover:scale-105 z-10"
                            onerror="this.src='https://placehold.co/400x300/e1f7e6/1f6a4c?text=${encodeURIComponent(cleanName.substring(0, 20))}'">
                        <div class="absolute inset-0 bg-black/5 group-hover:bg-black/0 transition-colors z-20"></div>
                        <span class="absolute top-4 left-4 bg-white/90 backdrop-blur text-forest-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider z-30">${cat}</span>
                    </div>
                    <div class="p-6">
                        <h3 class="font-serif text-xl text-forest-900 mb-2 truncate">${cleanName}</h3>
                        <div class="flex items-center justify-between mt-4 border-t border-forest-50 pt-4">
                            <span class="text-gold-600 font-bold text-lg">${formatMoney(price)}</span>
                            <a href="#visit" 
                                class="text-forest-500 hover:text-forest-700 transition-colors flex items-center gap-1 text-sm font-medium">
                                Buy <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        // Render product grid
        function renderGrid() {
            const filtered = activeCat === 'all'
                ? products
                : products.filter(p => getVal(p, 'CATEGORY', 'Category').toLowerCase() === activeCat.toLowerCase());

            if (filtered.length === 0) {
                el.grid.innerHTML = '';
                el.empty.classList.remove('hidden');
            } else {
                el.empty.classList.add('hidden');
                el.grid.innerHTML = filtered.map((p, i) => createCard(p, i)).join('');
            }
        }

        // Set active category
        window.setCat = (c) => {
            activeCat = c;
            const cats = [...new Set(products.map(p => getVal(p, 'CATEGORY', 'Category')))].filter(Boolean).sort();
            renderFilters(cats);
            renderGrid();
        };

        // Show specific error with detailed information
        function showError(errorType, rawError = null) {
            el.loading.classList.add('hidden');
            el.error.classList.remove('hidden');

            // Error configurations for different failure types
            const errorConfigs = {
                'network_offline': {
                    title: 'You\'re Offline',
                    message: 'Your device appears to be disconnected from the internet.',
                    reason: 'No Internet Connection',
                    hint: 'Check your WiFi or mobile data and try again.',
                    code: 'ERR_NETWORK_OFFLINE',
                    type: 'Network Error',
                    iconBg: 'bg-orange-100',
                    iconColor: 'text-orange-600',
                    boxBg: 'bg-orange-50',
                    boxBorder: 'border-orange-200'
                },
                'server_unreachable': {
                    title: 'Server Unreachable',
                    message: 'We couldn\'t connect to Google Sheets where our catalog is hosted.',
                    reason: 'Image/Data Server Unreachable',
                    hint: 'The Google Sheets server may be temporarily unavailable. Please try again in a few minutes.',
                    code: 'ERR_SERVER_UNREACHABLE',
                    type: 'Server Error',
                    iconBg: 'bg-red-100',
                    iconColor: 'text-red-600',
                    boxBg: 'bg-red-50',
                    boxBorder: 'border-red-200'
                },
                'cors_blocked': {
                    title: 'Access Blocked',
                    message: 'Your browser blocked the request due to security restrictions.',
                    reason: 'Cross-Origin Request Blocked (CORS)',
                    hint: 'Try refreshing the page or using a different browser. If on a company network, security settings may be blocking access.',
                    code: 'ERR_CORS_BLOCKED',
                    type: 'Security Error',
                    iconBg: 'bg-yellow-100',
                    iconColor: 'text-yellow-600',
                    boxBg: 'bg-yellow-50',
                    boxBorder: 'border-yellow-200'
                },
                'empty_data': {
                    title: 'No Products Found',
                    message: 'The catalog loaded but appears to be empty.',
                    reason: 'Product Catalog is Empty',
                    hint: 'The product list may be updating. Contact us on WhatsApp for immediate assistance.',
                    code: 'ERR_EMPTY_CATALOG',
                    type: 'Data Error',
                    iconBg: 'bg-blue-100',
                    iconColor: 'text-blue-600',
                    boxBg: 'bg-blue-50',
                    boxBorder: 'border-blue-200'
                },
                'invalid_format': {
                    title: 'Data Format Error',
                    message: 'The product data couldn\'t be read properly.',
                    reason: 'Invalid Data Format Received',
                    hint: 'There may be an issue with the Google Sheets format. Please contact support.',
                    code: 'ERR_INVALID_FORMAT',
                    type: 'Parse Error',
                    iconBg: 'bg-purple-100',
                    iconColor: 'text-purple-600',
                    boxBg: 'bg-purple-50',
                    boxBorder: 'border-purple-200'
                },
                'timeout': {
                    title: 'Request Timed Out',
                    message: 'The server took too long to respond.',
                    reason: 'Connection Timeout',
                    hint: 'Your internet may be slow, or the server is under heavy load. Try again.',
                    code: 'ERR_TIMEOUT',
                    type: 'Timeout Error',
                    iconBg: 'bg-gray-100',
                    iconColor: 'text-gray-600',
                    boxBg: 'bg-gray-50',
                    boxBorder: 'border-gray-200'
                },
                'unknown': {
                    title: 'Something Went Wrong',
                    message: 'An unexpected error occurred while loading the catalog.',
                    reason: 'Unknown Error',
                    hint: 'Please try again. If the problem persists, contact us via WhatsApp.',
                    code: 'ERR_UNKNOWN',
                    type: 'Unknown Error',
                    iconBg: 'bg-red-100',
                    iconColor: 'text-red-600',
                    boxBg: 'bg-red-50',
                    boxBorder: 'border-red-200'
                }
            };

            const config = errorConfigs[errorType] || errorConfigs['unknown'];

            // Update UI elements
            document.getElementById('error-title').textContent = config.title;
            document.getElementById('error-message').textContent = config.message;
            document.getElementById('error-reason').textContent = config.reason;
            document.getElementById('error-hint').textContent = config.hint;
            document.getElementById('error-code').textContent = `Error Code: ${config.code}`;
            document.getElementById('error-type').textContent = `Type: ${config.type}`;
            document.getElementById('error-timestamp').textContent = `Time: ${new Date().toLocaleString()}`;

            // Update error icon styling
            const errorIcon = document.getElementById('error-icon');
            errorIcon.className = `inline-flex items-center justify-center w-6 h-6 rounded-full ${config.iconBg} ${config.iconColor} text-xs font-bold`;

            // Update error details box styling
            const errorDetails = document.getElementById('error-details');
            errorDetails.className = `${config.boxBg} border ${config.boxBorder} rounded-xl p-4 mb-6 text-left`;

            // Update reason/hint text colors based on error type
            document.getElementById('error-reason').className = `text-sm font-medium ${config.iconColor.replace('text-', 'text-').replace('600', '800')}`;
            document.getElementById('error-hint').className = `text-sm ${config.iconColor} mt-1`;

            // Log for debugging
            console.error(`[${config.code}] ${config.type}: ${config.reason}`, rawError);
        }

        // Detect error type from error object
        function detectErrorType(error) {
            if (!navigator.onLine) {
                return 'network_offline';
            }

            if (error) {
                const errorStr = String(error).toLowerCase();
                const errorMessage = error.message ? error.message.toLowerCase() : '';
                const errorName = error.name ? error.name.toLowerCase() : '';

                if (errorName === 'aborterror' || errorStr.includes('abort') || errorMessage.includes('abort')) {
                    return 'timeout';
                }

                if (errorStr.includes('cors') || errorMessage.includes('cors') ||
                    errorStr.includes('cross-origin') || errorMessage.includes('blocked')) {
                    return 'cors_blocked';
                }

                if (errorStr.includes('timeout') || errorMessage.includes('timeout') ||
                    errorStr.includes('timed out')) {
                    return 'timeout';
                }

                if (errorStr.includes('network') || errorMessage.includes('network') ||
                    errorStr.includes('failed to fetch') || errorMessage.includes('fetch')) {
                    return 'server_unreachable';
                }
            }

            return 'unknown';
        }

        // Fetch and parse CSV data
        window.fetchData = async () => {
            el.loading.classList.remove('hidden');
            el.error.classList.add('hidden');
            el.grid.innerHTML = '';

            // Check network status first
            if (!navigator.onLine) {
                showError('network_offline');
                el.loading.classList.add('hidden');
                return;
            }

            const fetchWithTimeout = async (url, timeout = 30000) => {
                const controller = new AbortController();
                const id = setTimeout(() => controller.abort(), timeout);
                try {
                    const response = await fetch(url, { signal: controller.signal });
                    clearTimeout(id);
                    return response;
                } catch (error) {
                    clearTimeout(id);
                    throw error;
                }
            };

            try {
                // Check if PapaParse is loaded
                if (typeof Papa === 'undefined') {
                    throw new Error('PapaParse library not loaded');
                }

                let csvText = '';

                try {
                    // Attempt 1: Direct Fetch
                    console.log('Attempting direct fetch...');
                    const response = await fetchWithTimeout(CSV_URL);
                    if (!response.ok) throw new Error('Direct fetch failed');
                    csvText = await response.text();
                } catch (directError) {
                    console.warn('Direct fetch failed, trying proxy...', directError);
                    // Attempt 2: CORS Proxy
                    const PROXY_URL = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(CSV_URL);
                    const response = await fetchWithTimeout(PROXY_URL);
                    if (!response.ok) throw new Error(`Proxy fetch failed: ${response.status}`);
                    csvText = await response.text();
                }

                Papa.parse(csvText, {
                    header: true,
                    skipEmptyLines: true,
                    complete: (res) => {
                        // Check for parsing errors
                        if (res.errors && res.errors.length > 0) {
                            console.error('Parse errors:', res.errors);
                            showError('invalid_format', res.errors);
                            return;
                        }

                        if (res.data && res.data.length) {
                            // Filter out empty rows
                            products = res.data.filter(p => {
                                const name = getVal(p, 'NAME', 'Name');
                                return name && name.length > 0;
                            });

                            // Check if we have any valid products
                            if (products.length === 0) {
                                showError('empty_data');
                                return;
                            }

                            const cats = [...new Set(products.map(p => getVal(p, 'CATEGORY', 'Category')))].filter(Boolean).sort();
                            renderFilters(cats);
                            renderGrid();
                        } else {
                            showError('empty_data');
                        }
                    },
                    error: (err) => {
                        console.error('Papa Parse Error:', err);
                        showError('invalid_format', err);
                    }
                });

            } catch (error) {
                console.error('Fetch Error:', error);
                const errorType = detectErrorType(error);
                showError(errorType, error);
            } finally {
                // Fail-safe: Ensure loader is ALWAYS hidden
                el.loading.classList.add('hidden');
            }
        };

        // Init
        document.addEventListener('DOMContentLoaded', fetchData);

        // Navbar Scroll Effect
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            if (window.scrollY > 50) {
                nav.classList.add('py-2', 'shadow-lg');
                nav.classList.remove('py-4');
            } else {
                nav.classList.add('py-4');
                nav.classList.remove('py-2', 'shadow-lg');
            }
        });

        // Mobile Menu Logic
        const menuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuIcon = document.getElementById('menu-icon');
        const closeIcon = document.getElementById('close-icon');
        const mobileLinks = document.querySelectorAll('.mobile-link');

        function toggleMenu() {
            const isOpen = !mobileMenu.classList.contains('translate-x-full');

            if (isOpen) {
                mobileMenu.classList.add('translate-x-full');
                menuIcon.classList.remove('hidden');
                closeIcon.classList.add('hidden');
                document.body.classList.remove('overflow-hidden');
            } else {
                mobileMenu.classList.remove('translate-x-full');
                menuIcon.classList.add('hidden');
                closeIcon.classList.remove('hidden');
                document.body.classList.add('overflow-hidden');
            }
        }

        menuBtn.addEventListener('click', toggleMenu);

        mobileLinks.forEach(link => {
            link.addEventListener('click', toggleMenu);
        });
    </script>
</body>

</html>